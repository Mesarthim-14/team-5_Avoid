//=====================================================================
//
//	パーティクル基礎処理[particle_info.h]
//	Author : toshiki
//
//=====================================================================

//=====================================================================
// インクルードファイル
//=====================================================================
#include "particle_info.h"
#include "scene3D.h"

//=====================================================================
// コンストラクタ
//=====================================================================
CParticleInfo::CParticleInfo()
{
	m_move = ZeroVector3;
	m_nLife = 0;
	m_bGravitySet = false;
}

//=====================================================================
// デストラクタ
//=====================================================================
CParticleInfo::~CParticleInfo()
{

}

//=====================================================================
// 初期化処理
//=====================================================================
HRESULT CParticleInfo::Init(void)
{
	CBillboard::Init();
	return S_OK;
}

//=====================================================================
// 更新処理
//=====================================================================
void CParticleInfo::Update(void)
{
	// 座標情報を取得
	D3DXVECTOR3 pos = GetPos();
	// 体力情報を取得
	m_nLife = GetLife();
	// 移動量を加算
	pos += m_move;
	// 重力をつけるかつけないかの判別
	if (m_bGravitySet)
	{
		Gravity();
	}
	//	ライフが０になったら消す
	m_nLife--;
	if (m_nLife <= 0)
	{
		Uninit();
	}
	// 加算した情報を設定
	SetPos(pos);
}

//=====================================================================
// 終了処理
//=====================================================================
void CParticleInfo::Uninit(void)
{
	CBillboard::Uninit();
}

//=====================================================================
// 描画処理
//=====================================================================
void CParticleInfo::Draw(void)
{
	CBillboard::Draw();
}

//=====================================================================
// 重力
//=====================================================================
void CParticleInfo::Gravity(void)
{
	// 座標情報を取得
	D3DXVECTOR3 pos = GetPos();
	m_move.y -= 0.05f;
	// 移動量を加算
	pos.y += m_move.y;
}